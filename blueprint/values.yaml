# @schema
# description: Frontend tier configuration
# type: object
# @schema
frontend:
  # @schema
  # description: Whether to deploy the frontend tier
  # type: boolean
  # default: true
  # @schema
  enabled: true
  # @schema
  # description: List of frontend Deployments to create
  # type: array
  # items:
  #   type: object
  #   required: [name, image, port, replicas]
  #   properties:
  #     name:
  #       type: string
  #       description: Name of the frontend Deployment
  #     image:
  #       description: Container image for the frontend
  #       type: string
  #       default: nginx:latest
  #     port:
  #       type: integer
  #       default: 90
  #       minimum: 1
  #       maximum: 65535
  #       description: Service/container port exposed by the frontend
  #     replicas:
  #       type: integer
  #       description: Desired number of replicas for the frontend Deployment
  #       minimum: 1
  #       default: 1
  # @schema
  deployments:
  - # @schema
    name: frontend-one
    image: nginx:latest
    port: 80
    replicas: 1
    # @schema

# @schema
# description: Backend tier configuration (apps and backing services)
# type: object
# @schema
backend:
  # @schema
  # description: Whether to deploy the backend tier
  # type: boolean
  # default: true
  # @schema
  enabled: true
  # @schema
  # description: List of backend Deployments to create
  # type: array
  # items:
  #   type: object
  #   required: [name, image, port, replicas]
  #   properties:
  #     name:
  #       type: string
  #       description: Name of the backend Deployment
  #     image:
  #       type: string
  #       description: Container image for the backend
  #       default: openeuler/spring-boot:latest
  #     port:
  #       type: integer
  #       description: Service/container port exposed by the backend
  #       minimum: 1
  #       maximum: 65535
  #       default: 8080
  #     replicas:
  #       description: Desired number of replicas for the backend Deployment
  #       minimum: 1
  #       default: 1
  #       type: integer
  #     kafka:
  #       type: object
  #       description: Apache Kafka configuration (cluster + topics)
  #       properties:
  #         enabled:
  #           description: Whether to deploy/configure Kafka resources
  #           default: true
  #           type: boolean
  #         topics:
  #           type: array
  #           description: Topics to create on the cluster
  #           items:
  #             type: object
  #             required: [topicName, partitions, replicas]
  #             properties:
  #               topicName:
  #                 type: string
  #                 description: Kafka topic name
  #               partitions:
  #                 type: integer
  #                 description: Number of partitions for the topic
  #                 minimum: 1
  #                 default: 1
  #               replicas:
  #                 type: integer
  #                 description: Replication factor for the topic
  #                 minimum: 1
  #                 default: 1
  #     hazelcast:
  #       type: object
  #       description: Hazelcast in-memory data grid configuration
  #       properties:
  #         enabled:
  #           type: boolean
  #           description: Whether to deploy/configure Hazelcast resources
  #           default: true
  #         clusters:
  #           type: array
  #           description: list of Hazelcast clusters to create
  #           items:
  #             type: object
  #             required: [name, size]
  #             properties:
  #               name:
  #                 type: string
  #                 description: Cluster name
  #               size:
  #                 type: integer
  #                 description: Number of members in the cluster
  #                 minimum: 1
  #                 default: 1
  #     mongodb:
  #       type: object
  #       description: MongoDB (via MongoDB Operator) configuration
  #       properties:
  #         enabled:
  #           type: boolean
  #           description: Whether to deploy/configure MongoDB Operator resources
  #           default: true
  #         instances:
  #           type: array
  #           description: List of MongoDB clusters to create
  #           items:
  #             type: object
  #             required: [clusterName, replicas, storageSize]
  #             properties:
  #               clusterName:
  #                 type: string
  #                 description: Cluster name
  #               replicas:
  #                 type: integer
  #                 description: Number of MongoDB replicas
  #                 minimum: 1
  #                 default: 1
  #               storageSize:
  #                 type: string
  #                 description: Persistent storage request size
  #                 pattern: '^[0-9]+Gi$'
  #                 default: "2Gi"
  #     cloudnativepg:
  #       type: object
  #       description: CloudNativePG (PostgreSQL operator) configuration
  #       properties:
  #         enabled:
  #           description: Whether to deploy/configure CloudNativePG clusters
  #           default: true
  #           type: boolean
  #         instances:
  #           type: array
  #           description: List of CloudNativePG clusters to create
  #           items:
  #             type: object
  #             required: [clusterName, replicas, storageSize, databaseName, user]
  #             properties:
  #               clusterName:
  #                 type: string
  #                 description: Cluster name
  #               replicas:
  #                 type: integer
  #                 description: Number of PostgreSQL instances (pods)
  #                 minimum: 1
  #                 default: 1
  #               storageSize:
  #                 type: string
  #                 description: Persistent storage request size per instance
  #                 pattern: '^[0-9]+Gi$'
  #                 default: "1Gi"
  #               databaseName:
  #                 type: string
  #                 description: Default database name to create
  #               user:
  #                 type: string
  #                 description: Database user to create
  #                 default: appuser
  # @schema
  deployments:
  - # @schema
    name: backend-one
    image: openeuler/spring-boot:latest
    port: 8080
    replicas: 1
    kafka:
      enabled: true
      topics:
      - # @schema
        topicName: "first-topic"
        partitions: 1
        replicas: 1    
        # @schema
    hazelcast:
      enabled: true
      clusters:
      - # @schema
        name: "hz-first"
        size: 1
        # @schema
    mongodb:
      enabled: true
      instances: 
      - # @schema
        clusterName: "mongodb-one"
        replicas: 1
        storageSize: "2Gi"
    cloudnativepg:
      enabled: true
      instances:
      - # @schema
        clusterName: "cnpg-the-first"
        replicas: 1
        storageSize: "1Gi"
        databaseName: "appdb"
        user: "appuser"
        # @schema